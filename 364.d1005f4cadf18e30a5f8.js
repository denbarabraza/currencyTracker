"use strict";(self.webpackChunkcurrencyTracker=self.webpackChunkcurrencyTracker||[]).push([[364],{5364:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ue});var r,o,i,a,c,s,u=n(5893),l=n(7294),p=n(6113),f=n(8685),d=n(5376),h=n(5512),y=n(745),v=n(394),m=n(4911),x=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},g=v.ZP.div(r||(r=x(["\n  pointer-events: all;\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  top: 10%;\n  left: 0;\n  transition: 0.4s;\n  z-index: 3;\n"],["\n  pointer-events: all;\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  top: 10%;\n  left: 0;\n  transition: 0.4s;\n  z-index: 3;\n"]))),b=v.ZP.div(o||(o=x(["\n  max-width: 70vw;\n  max-height: 20vh;\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  pointer-events: all;\n  background-color: ",";\n  transition: 0.4s;\n"],["\n  max-width: 70vw;\n  max-height: 20vh;\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  pointer-events: all;\n  background-color: ",";\n  transition: 0.4s;\n"])),m.ck.green),j=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=document.getElementById("pop-root"),t}return j(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout((function(){(0,y.s)(e.root).unmount()}),3e3)},t.prototype.renderComponent=function(){(0,y.s)(this.root).render((0,u.jsx)(t,{}))},t.prototype.render=function(){return(0,u.jsx)(g,{children:(0,u.jsx)(b,{"data-cy":"chartPopUp",children:"The chart with the data for the past month was successfully built"})})},t}(l.Component),O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(){function e(e){this.observers=[],this.data=e}return e.prototype.processData=function(){this.notifyObservers()},e.prototype.registerObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)t[e].update()},e}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.update=function(){new w({}).renderComponent()},t}(function(){function e(e){this.subject=e,this.subject.registerObserver(this)}return e.prototype.unsubscribe=function(){this.subject.removeObserver(this)},e}()),_=n(6799),D=n(3037),P=n(5189),T=v.ZP.div(a||(c=["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: ",";\n  width: ",";\n  background-color: ",";\n"],s=["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: ",";\n  width: ",";\n  background-color: ",";\n"],Object.defineProperty?Object.defineProperty(c,"raw",{value:s}):c.raw=s,a=c),(function(e){return e.theme.valueInVh.vh50}),(function(e){return e.theme.valueInPercent.pr100}),(function(e){return e.theme.usedColors.lightGreen}));h.kL.register(h.uw,h.f$,h.ZL,h.Dx,h.u,h.De);var L,S,A,M,z=(0,l.memo)((function(e){var t=e.dataChart,n=e.code,r=(0,_.C)(D.hU),o=function(e,t){var n={datasets:[{label:"".concat(t," / USD"),data:e&&(null==e?void 0:e.map((function(e){var t=e.time_close,n=e.price_open,r=e.price_high,o=e.price_low,i=e.price_close;return{x:t.slice(0,10),o:n,h:r,l:o,c:i,s:[n,i]}}))),backgroundColor:function(e){var t=e.raw,n=t.o,r=t.c;return"".concat(r>=n?m.ck.greenChart:m.ck.red)},barPercentage:1,maxBarThickness:20,minBarLength:7,borderColor:"".concat(m.ck.black),borderWidth:2,borderSkipped:!1}]},r={id:"candlestick",beforeDatasetDraw:function(e,t){var r=e.ctx,o=e.scales,i=(o.x,o.y);r.save(),r.lineWidth=2,r.strokeStyle="".concat(m.ck.black),n.datasets[0].data.forEach((function(t,o){var a,c,s,u;r.beginPath(),r.moveTo(e.getDatasetMeta(0).data[o].x,e.getDatasetMeta(0).data[o].y),r.lineTo(e.getDatasetMeta(0).data[o].x,i.getPixelForValue(null===(c=null===(a=null==n?void 0:n.datasets[0])||void 0===a?void 0:a.data[o])||void 0===c?void 0:c.h)),r.stroke(),r.beginPath(),r.moveTo(e.getDatasetMeta(0).data[o].x,e.getDatasetMeta(0).data[o].y),r.lineTo(e.getDatasetMeta(0).data[o].x,i.getPixelForValue(null===(u=null===(s=null==n?void 0:n.datasets[0])||void 0===s?void 0:s.data[o])||void 0===u?void 0:u.l)),r.stroke()}))}};return{data:n,options:{responsive:!0,devicePixelRatio:20,parsing:{xAxisKey:"x",yAxisKey:"s"},scales:{x:{stacked:!0,grid:{offset:!0}},y:{stacked:!0,beginAtZero:!1,grace:"80%",grid:{offset:!0}}}},plugins:[r]}}(t,n);return(0,l.useEffect)((function(){var e=new C(t),n=new k(e);return r===P.z.Month&&t&&e.processData(),function(){n.unsubscribe()}}),[r,t]),(0,u.jsx)(T,{"data-cy":"barChat","data-testid":"barChat",children:(0,u.jsx)(d.$Q,{data:o.data,options:o.options,plugins:o.plugins})})})),E=n(6235),Z=n(8196),F=n(4346),N=n(4559),R=n(7770),q=(0,l.memo)((function(e){var t=e.open,n=e.period,r=(0,_.T)(),o=(0,l.useCallback)((function(){var e=n===P.z.Day?P.z.Month:P.z.Day;n===P.z.Day&&r((0,R.km)(null)),r((0,R.sO)(null)),r((0,R.dx)(e))}),[r,n]);return(0,u.jsxs)(N.Gd,{open:t||!1,"data-testid":"toggle",children:[n===P.z.Month?"Month":"Day",(0,u.jsxs)(N.QQ,{children:[(0,u.jsx)(N.sM,{type:"checkbox",checked:n!==P.z.Day,onChange:o}),(0,u.jsx)(N.Y1,{"data-cy":"periodToggleSlider"})]})]})})),B=n(9285),I=n(2583),$=n(7479),Q=function(e){return B.Z.filter((function(t){return t.name===e}))},U=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},V=v.ZP.div(L||(L=U(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  margin: "," ",";\n  min-height: ",";\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  margin: "," ",";\n  min-height: ",";\n"])),(function(e){return e.theme.indentation.i20}),(function(e){return e.theme.indentation.i0}),(function(e){return e.theme.valueInVh.vh30})),G=v.ZP.div(S||(S=U(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n"]))),K=v.ZP.div(A||(A=U(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),W=v.ZP.div(M||(M=U(["\n  font-size: ",";\n  padding-bottom: ",";\n  color: ",";\n"],["\n  font-size: ",";\n  padding-bottom: ",";\n  color: ",";\n"])),(function(e){return e.theme.fontSizes.m}),(function(e){return e.theme.indentation.i10}),(function(e){return e.theme.colors.toggleBorder})),Y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(e){function t(t){var n=e.call(this,t)||this;return n.currenciesOptions=B.Z.filter((function(e){return"Bitcoin"===e.name||"Ethereum"===e.name})),n.fetchCurrency=function(){var e=n.props,t=e.selectedDay,r=e.period,o=e.fetchCurrencyDayOhlcvThunk,i=e.fetchCurrencyMonthOhlcvThunk;if(n.state.code&&t&&o(n.state.code,t),n.state.code&&r===P.z.Month){var a=(0,I.E)(r),c="".concat(a.year,"-").concat(a.month,"-").concat(a.day);i(n.state.code,c)}},n.handleSelectChange=function(e){n.props.setCurrencyForTimeLine(e),n.props.setDataForChart(null)},n.state={code:(0,$.$)(n.props.currencyTimeLineName),selectCurrency:Q(n.props.currencyTimeLineName)},n}return Y(t,e),t.prototype.componentDidMount=function(){this.fetchCurrency()},t.prototype.componentDidUpdate=function(e){e.selectedDay===this.props.selectedDay&&e.period===this.props.period||this.fetchCurrency(),e.currencyTimeLineName!==this.props.currencyTimeLineName&&this.setState({code:(0,$.$)(this.props.currencyTimeLineName),selectCurrency:Q(this.props.currencyTimeLineName)})},t.prototype.render=function(){var e=this.state.code,t=this.props,n=t.currencyTimeLineName,r=t.dataChar,o=t.period;return(0,u.jsxs)(V,{children:[(0,u.jsxs)(G,{children:[(0,u.jsx)(W,{children:"Select the currency that interests you"}),(0,u.jsx)(Z.A,{type:F.r.Currency,options:this.currenciesOptions,value:n,onChange:this.handleSelectChange})]}),(0,u.jsxs)(K,{children:[(0,u.jsx)(q,{period:o}),o===P.z.Day&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(W,{children:"Select from which date to bring statistics"}),(0,u.jsx)(Z.A,{type:F.r.Day})]}),(0,u.jsx)(E.d,{currencies:this.state.selectCurrency})]}),r&&e&&(0,u.jsx)(z,{dataChart:r,code:e})]})},t}(l.PureComponent),J=n(2861),X=n(1689),ee=n(794),te=n(5957),ne=n(8017),re=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(){return ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ae.apply(this,arguments)},ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t.prototype.render=function(){var e=this.props,t=e.errorCurrency,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["errorCurrency"]);return t?(0,u.jsx)(f.Q,{error:t}):(0,u.jsx)(H,ae({},n))},t}(l.Component),se={setCurrencyForTimeLine:R.d6,setDataForChart:R.sO,fetchCurrencyDayOhlcvThunk:function(e,t){return function(n){return re(void 0,void 0,void 0,(function(){var r,o,i,a;return oe(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),n((0,ee.qy)(ne.A.Loading)),[4,X.R.getCurrencyDayData(e,t)];case 1:return r=c.sent(),n((0,R.sO)(r)),n((0,te.R9)(null)),n((0,ee.qy)(ne.A.Succeeded)),[3,3];case 2:return o=c.sent(),J.Z.isAxiosError(o)&&(i=o.response?null===(a=o.response)||void 0===a?void 0:a.data.message:o.message,n((0,te.R9)(i))),n((0,ee.qy)(ne.A.Failed)),[3,3];case 3:return[2]}}))}))}},fetchCurrencyMonthOhlcvThunk:function(e,t){return function(n){return re(void 0,void 0,void 0,(function(){var r,o,i,a;return oe(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),n((0,ee.qy)(ne.A.Loading)),[4,X.R.getCurrencyMonthData(e,t)];case 1:return r=c.sent(),n((0,R.sO)(r)),n((0,te.R9)(null)),n((0,ee.qy)(ne.A.Succeeded)),[3,3];case 2:return o=c.sent(),J.Z.isAxiosError(o)&&(i=o.response?null===(a=o.response)||void 0===a?void 0:a.data.message:o.message,n((0,te.R9)(i))),n((0,ee.qy)(ne.A.Failed)),[3,3];case 3:return[2]}}))}))}}};const ue=(0,p.$j)((function(e){return{currencyTimeLineName:e.timeLine.currencyTimeLine,period:e.timeLine.period,selectedDay:e.timeLine.selectedDay,dataChar:e.timeLine.dataForChart,errorCurrency:e.home.errorCurrency}}),se)(ce)}}]);